(self["webpackChunkrendez_vous_ci"]=self["webpackChunkrendez_vous_ci"]||[]).push([[258],{9186:(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});s(246);var a=s(3673),l=s(2323);const i={class:"breadcrumb-bar"},o={class:"container-fluid"},r={class:"row align-items-center"},n={class:"col-md-12 col-12"},d={"aria-label":"breadcrumb",class:"page-breadcrumb"},c={class:"breadcrumb"},m=(0,a.Wm)("li",{class:"breadcrumb-item"},[(0,a.Wm)("a",{href:"index-2.html"},"Accueil")],-1),u={class:"breadcrumb-item active","aria-current":"page"},p={class:"breadcrumb-title"};function h(e,t,s,h,f,g){return(0,a.wg)(),(0,a.j4)("div",null,[(0,a.Wm)("div",i,[(0,a.Wm)("div",o,[(0,a.Wm)("div",r,[(0,a.Wm)("div",n,[(0,a.Wm)("nav",d,[(0,a.Wm)("ol",c,[m,(0,a.Wm)("li",u,(0,l.zw)(s.titre),1)])]),(0,a.Wm)("h2",p,(0,l.zw)(s.description),1)])])])])])}const f={props:["titre","description"],setup(){return{}}};f.render=h;const g=f},2258:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>fe});var a=s(3673),l=s(2323),i=s(8880);const o=(0,a.HX)("data-v-44ec4322");(0,a.dD)("data-v-44ec4322");const r={class:"content q-mb-lg",style:{"min-height":"550px"}},n={key:0,class:"container"},d={class:"col-12"},c={class:"card"},m={class:"card-body"},u={class:"booking-doc-info"},p={href:"doctor-profile.html",class:"booking-doc-img"},h={class:"booking-info"},f={href:"doctor-profile.html"},g=(0,a.uE)('<div class="rating" data-v-44ec4322><i class="fas fa-star filled" data-v-44ec4322></i><i class="fas fa-star filled" data-v-44ec4322></i><i class="fas fa-star filled" data-v-44ec4322></i><i class="fas fa-star filled" data-v-44ec4322></i><i class="fas fa-star" data-v-44ec4322></i><span class="d-inline-block average-rating" data-v-44ec4322>35</span></div>',1),b={class:"text-muted mb-0"},v=(0,a.Wm)("i",{class:"fas fa-map-marker-alt"},null,-1),y={key:0,class:"col-12"},W={class:"card shadow-1 q-pa-none"},w={class:"d-flex ",style:{width:"100%"}},x={class:"col-grow q-pa-lg"},k={class:"text-center"},q=(0,a.Wm)("p",{class:"text-h6  text-weight-bolder"},"Sélectionner une date et un jour",-1),_={key:0,class:"col-md-4  q-pa-lg "},D={key:0},S={class:"row q-gutter-sm"},z={key:1,class:"col-12"},j={class:"card shadow-1 q-pa-none"},Z={class:"d-flex ",style:{width:"100%"}},$={class:"col-md-4 q-pa-lg"},C={class:""},Y={class:"q-mb-md"},P=(0,a.Wm)("p",{class:"text-h6  text-weight-bolder"},"Uné étape supplémentaire svp !",-1),U={class:"text-secondary text-weight-bold",style:{"letter-spacing":"2px","font-size":"16px"}},M={style:{"font-size":"16px",color:"rgba(26,26,26,0.6)"},class:"text-subtitle1"},Q=(0,a.Uk)(" Temps GMT"),R={key:0,class:"col-md-8  q-pa-lg "},V=(0,a.Wm)("h4",{class:"text-h6 text-weight-bold"},"Svp, Partagez des détails",-1),O={class:"text-caption"},T=(0,a.Uk)("Entrez les informations qui pourraient permettre à "),I={class:"font-weight-bold"},A=(0,a.Uk)(" de mieux connaitre le motif de votre RDV "),E={key:0,class:"form-group"},F=(0,a.Wm)("label",{class:"text-weight-bold text-caption"},"Nom *",-1),B={key:1,class:"form-group"},H=(0,a.Wm)("label",{class:"text-weight-bold text-caption"},"Adresse Email *",-1),G={class:"form-group"},K=(0,a.Wm)("label",{class:"text-weight-bold text-caption"},"Motif du rdv (Optionnel)",-1),N={class:"text-right text-weight-bold"},X={key:1,class:"col-12 text-center",style:{height:"200px"}};(0,a.Cn)();const J=o(((e,t,s,J,L,ee)=>{const te=(0,a.up)("breadcrumb"),se=(0,a.up)("q-date"),ae=(0,a.up)("q-separator"),le=(0,a.up)("q-btn"),ie=(0,a.up)("q-scroll-area"),oe=(0,a.up)("q-icon"),re=(0,a.up)("q-spinner-cube");return(0,a.wg)(),(0,a.j4)("div",null,[L.professionnal?((0,a.wg)(),(0,a.j4)(te,{key:0,titre:"Profil",description:ee.fqdn},null,8,["description"])):(0,a.kq)("",!0),(0,a.Wm)("div",r,[L.loading?((0,a.wg)(),(0,a.j4)("div",X,[(0,a.Wm)("div",null,[(0,a.Wm)(re,{size:"md",color:"primary"})])])):((0,a.wg)(),(0,a.j4)("div",n,[(0,a.Wm)("div",d,[(0,a.Wm)("div",c,[(0,a.Wm)("div",m,[(0,a.Wm)("div",u,[(0,a.Wm)("a",p,[null==L.professionnal.image?((0,a.wg)(),(0,a.j4)("img",{key:0,class:"img-fluid",src:"https://eu.ui-avatars.com/api/?rounded=true&color=ffffff&background=20c0f3&name="+L.professionnal.given_names+"+"+L.professionnal.last_name,alt:"User Image"},null,8,["src"])):((0,a.wg)(),(0,a.j4)("img",{key:1,src:L.professionnal.image,class:"img-fluid",alt:"User Image"},null,8,["src"]))]),(0,a.Wm)("div",h,[(0,a.Wm)("h4",null,[(0,a.Wm)("a",f,(0,l.zw)(ee.fqdn),1)]),g,(0,a.Wm)("p",b,[v,(0,a.Uk)(" "+(0,l.zw)(L.professionnal.address),1)])])])])])]),1==L.step?((0,a.wg)(),(0,a.j4)("div",y,[(0,a.Wm)("div",W,[(0,a.Wm)("div",w,[(0,a.Wm)("div",x,[(0,a.Wm)("div",k,[q,(0,a.Wm)(se,{options:ee.optionsFn,landscape:"","no-unset":"","today-btn":"",class:"calendrar",style:{width:"400px",height:"400px"},minimal:"",flat:"",modelValue:L.selectedDate,"onUpdate:modelValue":t[1]||(t[1]=e=>L.selectedDate=e)},null,8,["options","modelValue"])])]),(0,a.Wm)(ae,{inset:"",vertical:""}),L.visible?((0,a.wg)(),(0,a.j4)("div",_,[(0,a.Wm)("p",null,(0,l.zw)(ee.formatDate),1),0!=L.slotsOfDay.length?((0,a.wg)(),(0,a.j4)("div",D,[(0,a.Wm)(ie,{"thumb-style":L.thumbStyle,"bar-style":L.barStyle,style:{height:"400px","max-width":"300px"}},{default:o((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(L.slotsOfDay,(e=>((0,a.wg)(),(0,a.j4)("div",{key:e.id},[(0,a.Wm)("div",S,[(0,a.Wm)(le,{onClick:t=>ee.selectSlot(e.id),style:{height:"50px"},class:"col-grow q-mb-sm text-sm text-weight-bold",outline:"",color:"primary",size:"lg",label:e.heure_debut.slice(0,5)+" - "+e.heure_fin.slice(0,5)},null,8,["onClick","label"]),(0,a.Wm)(i.uT,{name:"slide-fade",mode:"out-in"},{default:o((()=>[L.selectedSlot==e.id?((0,a.wg)(),(0,a.j4)(le,{key:0,onClick:t=>ee.comfirmSlot(e),style:{height:"50px"},class:"q-mb-sm text-sm bg-primary text-white text-weight-bold",outline:"",color:"primary",size:"lg",label:"Confirmer"},null,8,["onClick"])):(0,a.kq)("",!0)])),_:2},1024)])])))),128))])),_:1},8,["thumb-style","bar-style"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])])])):((0,a.wg)(),(0,a.j4)("div",z,[(0,a.Wm)("div",j,[(0,a.Wm)("div",Z,[(0,a.Wm)("div",$,[(0,a.Wm)("div",C,[(0,a.Wm)("div",Y,[(0,a.Wm)("a",{href:"#",onClick:t[2]||(t[2]=e=>L.step=1)},[(0,a.Wm)(oe,{name:"arrow_back",class:"text-primary",style:{"font-size":"32px"}})])]),P,(0,a.Wm)(ae,{class:"q-mb-lg"}),(0,a.Wm)("p",U,[(0,a.Wm)(oe,{name:"event",class:"text-secondary",style:{"font-size":"32px"}}),(0,a.Uk)((0,l.zw)(ee.formatSlot)+" "+(0,l.zw)(ee.formatDate),1)]),(0,a.Wm)("p",M,[(0,a.Wm)(oe,{name:"public",style:{"font-size":"32px"}}),Q])])]),(0,a.Wm)(ae,{inset:"",vertical:""}),L.visible?((0,a.wg)(),(0,a.j4)("div",R,[(0,a.Wm)("p",null,(0,l.zw)(ee.formatDate),1),V,(0,a.Wm)("p",O,[T,(0,a.Wm)("span",I,(0,l.zw)(ee.fqdn),1),A]),(0,a.Wm)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)((e=>ee.prendreRdv()),["prevent"])),action:"#"},[e.authenticated?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)("div",E,[F,(0,a.wy)((0,a.Wm)("input",{required:"",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>L.form.name=e),class:"form-control"},null,512),[[i.nr,L.form.name]])])),e.authenticated?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)("div",B,[H,(0,a.wy)((0,a.Wm)("input",{name:"email",required:"",type:"email","onUpdate:modelValue":t[4]||(t[4]=e=>L.form.email=e),class:"form-control"},null,512),[[i.nr,L.form.email]])])),(0,a.Wm)("div",G,[K,(0,a.wy)((0,a.Wm)("textarea",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>L.form.motif=e),rows:"6"},"\r\n                                        ",512),[[i.nr,L.form.motif]])]),(0,a.Wm)("div",N,[(0,a.Wm)(le,{loading:L.rdv_loading,type:"submit",class:"btn text-white bg-primary",label:"Prendre rendez-vous"},null,8,["loading"])])],32)])):(0,a.kq)("",!0)])])]))]))])])}));var L=s(515),ee=s.n(L),te=(s(7280),s(5363),s(9186)),se=s(5616),ae=s(7874);const le={components:{Breadcrumb:te.Z},data(){return{professionnal:null,days:null,selectedDate:null,firstDay:null,loading:!0,dateSelected:!1,slotsOfDay:[],pendingSlots:[],selectedSlot:null,confirmedSlot:null,rdv_loading:!1,thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.75},form:{email:null,motif:null,name:null},step:1,visible:!1,barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"9px",opacity:.2}}},watch:{selectedDate:function(e){this.visible=!0;let t=new Date(e).getDay();this.slotsOfDay=this.pendingSlots.filter((e=>e.day.num==t))}},computed:ee()(ee()({fqdn(){return this.professionnal.titre,this.professionnal.titre+" "+this.professionnal.given_names.split(" ")[0]+" "+this.professionnal.last_name}},(0,ae.Se)("auth",["authenticated","user"])),{},{formatDate(){return se.ZP.formatDate(this.selectedDate,"dddd, DD MMM YYYY")},formatSlot(){return this.confirmedSlot.heure_debut.slice(0,5)+" - "+this.confirmedSlot.heure_fin.slice(0,5)}}),mounted(){this.getPendingSlots(),this.getProfessionnal()},methods:{optionsFn(e){let t=new Date;return e>=se.ZP.formatDate(se.ZP.addToDate(t,{days:1}),"YYYY/MM/DD")&&e<=se.ZP.formatDate(se.ZP.addToDate(t,{days:21}),"YYYY/MM/DD")},getProfessionnal(){this.$api.get("professionnals/"+this.$route.params.id,{params:{with:"user"}}).then((e=>{this.professionnal=e.data,this.loading=!1})).catch((e=>console.log(e)))},getPendingSlots(){this.$api.post("pending-slots/"+this.$route.params.id).then((e=>{this.pendingSlots=e.data})).catch((e=>{console.log(e)}))},selectSlot(e){this.selectedSlot=e},selectDate(e){null!=this.date?this.dateSelected=!0:this.dateSelected=!1,console.log(this.date)},comfirmSlot(e){this.confirmedSlot=e,this.step=2},prendreRdv(e=this.confirmedSlot){if(this.rdv_loading=!0,this.authenticated){let t=this.selectedDate.replace("/","-");t=t+" "+e.heure_debut,this.$api.post("rdvs",{slot_id:e.id,date:t,customer_id:this.user.userable.id,professionnal_id:this.$route.params.id,motif:this.form.motif}).then((t=>{this.$q.notify({message:"Rendez-vous pris avec succès",color:"primary"}),this.$router.push({path:"/booking/"+t.data.id+"/success",query:{fqdn:this.fqdn,date:t.data.date,heure_debut:e.heure_debut,heure_fin:e.heure_fin,professionnal_id:this.$route.params.id}})})).catch((e=>console.log(e)))}else{this.step=2;let t=this.selectedDate.replace("/","-");t=t+" "+e.heure_debut,this.$api.post("rdvs",{slot_id:e.id,date:t,customer_name:this.form.name,customer_email:this.form.email,motif:this.form.motif,professionnal_id:this.$route.params.id}).then((t=>{this.$q.notify({message:"Rendez-vous pris avec succès",color:"primary"}),this.$router.push({path:"/booking/"+t.data.id+"/success",query:{fqdn:this.fqdn,date:t.data.date,heure_debut:e.heure_debut,heure_fin:e.heure_fin,professionnal_id:this.$route.params.id}})})).catch((e=>console.log(e)))}}}};var ie=s(5626),oe=s(5869),re=s(3e3),ne=s(2165),de=s(4554),ce=s(7013),me=s(151),ue=s(6115),pe=s(7518),he=s.n(pe);le.render=J,le.__scopeId="data-v-44ec4322";const fe=le;he()(le,"components",{QDate:ie.Z,QSeparator:oe.Z,QScrollArea:re.Z,QBtn:ne.Z,QIcon:de.Z,QSpinnerCube:ce.Z,QCard:me.Z,QField:ue.Z})}}]);